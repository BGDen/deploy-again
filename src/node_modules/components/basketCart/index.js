import React from 'react'
import { Link } from 'react-router-dom'
import { connect } from 'react-redux'

import Badge from '@material-ui/core/Badge'
import Grid from '@material-ui/core/Grid'
import IconButton from '@material-ui/core/IconButton'
import { ThemeProvider } from '@material-ui/styles'
import { cyan, green, yellow, red } from '@material-ui/core/colors'
import ShoppingCartIcon from '@material-ui/icons/ShoppingCartOutlined'
import MonetizationOnOutlinedIcon from '@material-ui/icons/MonetizationOnOutlined'
import { withStyles, makeStyles, createMuiTheme } from '@material-ui/core/styles'

import {
  getTotalBasketCount,
  getTotalBasketPrice
} from 'selectors'

const theme = createMuiTheme({
  palette: {
    primary: {
      main: red['A100'],
    },
    secondary: {
      main: green['A200'],
    },
  },
});

const useStyles = makeStyles((theme) => ({
  basket: {
    width: 130,
    marginRight: theme.spacing(2),
    color: theme.palette.primary
  },
}));

const StyledBadgeLeft = withStyles((theme) => ({
  badge: {
    right: -3,
    bottom: 17,
    // border: `2px solid ${theme.palette.background.paper}`,
    padding: '0 4px',
  },
}))(Badge);

const StyledBadgeRight = withStyles((theme) => ({
  badge: {
    right: -13,
    bottom: 17,
    // border: `2px solid ${theme.palette.background.paper}`,
    padding: '0 4px',
  },
}))(Badge);


const BasketCart = ({totalBasketCount, totalPrice})=> {
  const classes = useStyles();
  
  return(
    <ThemeProvider theme={theme}>
      <IconButton  aria-label="cart" color='inherit' className={classes.basket} >
          <Link
                to='/basket'
                id='dLabel'
                style={{width: '100%'}}
          >
            <Grid container direction="row" justify="space-around" alignItems="center">

              <StyledBadgeLeft badgeContent={totalBasketCount} color='primary' anchorOrigin={{
                  vertical: 'bottom',
                  horizontal: 'right',
              }}>
                <ShoppingCartIcon fontSize='large' style={{color: yellow['A100']}} />
              </StyledBadgeLeft>

              <StyledBadgeRight badgeContent={totalPrice} max={999999999} color="secondary" anchorOrigin={{
                vertical: 'bottom',
                horizontal: 'right',
              }}>
                <MonetizationOnOutlinedIcon fontSize='large' style={{color: cyan['A100']}} />
              </StyledBadgeRight>

            </Grid>
          </Link>
      </IconButton>
    </ThemeProvider>
  )
}

const mapStateToProps = state =>{
  return{
    totalBasketCount: getTotalBasketCount(state),
    totalPrice: getTotalBasketPrice(state)
  }
}

export default connect(mapStateToProps, null)(BasketCart)